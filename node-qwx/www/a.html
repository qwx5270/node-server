<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
  <title>login</title>
</head>
<body>
  <h3>登录界面</h3>
  <div>
    用户名: <input type="text"  id="user"><br>
    密码: <input type="password"  id="pass"><br>
    <button id="btn">登录</button>
  </div>

  <script type="text/javascript">
    window.onload = function () {
      var oUser = document.getElementById('user');
      var oPass = document.getElementById('pass');
      var oBtn = document.getElementById('btn');

      oBtn.onclick = function () {
        $.ajax({
          url: '/login',
          data: {user: oUser.value, pass: oPass.value},
          success: function (str) {
            console.log(str.ok);
            // var json = eval('('+str+')');

            if(str.ok) {
              alert('登录成功')
            } else {
              alert('失败: ' +str.msg);
            }
          },
          error: function () {
            alert('通信失败');
          }
        });
      };
    };
  </script>
</body>
</html>
